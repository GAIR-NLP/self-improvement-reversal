<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="Progress or Regress? Self-Improvement Reversal in Post-training">
  <meta name="keywords" content="LLMs, Self-Improvement, Post-training">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Progress or Regress? Self-Improvement Reversal in Post-training</title>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PYVRSFMDRL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-PYVRSFMDRL');
  </script>
  <script type="text/javascript" src="static/js/sort-table.js" defer></script>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="icon" href="./static/images/trust.png">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

<nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>
  <div class="navbar-menu">
    <div class="navbar-start" style="flex-grow: 1; justify-content: center;">
      <a class="navbar-item" href="https://github.com/GAIR-NLP/">
      <span class="icon">
          <i class="fas fa-home"></i>
      </span>
      </a>

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          More Research
        </a>
        <div class="navbar-dropdown">
          <a class="navbar-item" href="https://github.com/GAIR-NLP/abel">
            Abel
          </a>
          <a class="navbar-item" href="https://gair-nlp.github.io/MathPile/">
            MathPile
          </a>
          <a class="navbar-item" href="https://gair-nlp.github.io/ReAlign/">
            ReAlign
          </a>
          <a class="navbar-item" href="https://gair-nlp.github.io/benbench/">
            BenBench
          </a>
          <a class="navbar-item" href="https://gair-nlp.github.io/OlympicArena/">
            OlympicArena
          </a>
          <a class="navbar-item" href="https://gair-nlp.github.io/anole/">
            Anole
          </a>
          <a class="navbar-item" href="https://gair-nlp.github.io/BeHonest/">
            BeHonest
          </a>
        </div>
      </div>
    </div>

  </div>
</nav>


<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">Progress or Regress? Self-Improvement Reversal in Post-training</h1>
          <div class="is-size-5 publication-authors">
            <span class="author-block">Ting Wu<sup>1,3</sup>,</span>
            <span class="author-block">Xuefeng Li<sup>2,3</sup>,</span>
            <span class="author-block">Pengfei Liu<sup>2,3,4†</sup>,</span>
        </div>
        <div class="is-size-5 publication-authors">
            <span class="author-block"><sup>1</sup>Fudan University,</span>
            <span class="author-block"><sup>2</sup>Shanghai Jiao Tong University,</span>
            <span class="author-block"><sup>3</sup>Generative AI Research Lab (GAIR)</span>
            <span class="author-block"><sup>4</sup>Shanghai AI Laboratory,</span>
        </div>

        <div class="is-size-5 publication-authors">
          <span class="author-block"><sup>†</sup>Corresponding author</span>
        </div>
        

        <div class="column has-text-centered">
          <div class="publication-links">
            <!-- PDF Link. -->
            <span class="link-block">
              <a href="https://arxiv.org/pdf/2407.05013" target="_blank"
                  class="external-link button is-normal is-rounded is-dark">
                <span class="icon">
                    <i class="fas fa-file-pdf"></i>
                </span>
                <span>Paper</span>
              </a>
            </span>
            <span class="link-block">
              <a href="https://github.com/GAIR-NLP/self_improvement_reversal" target="_blank"
                  class="external-link button is-normal is-rounded is-dark">
                <span class="icon">
                    <i class="fab fa-github"></i>
                </span>
                <span>Code</span>
                </a>
            </span>
            <!-- Dataset Link. -->
          </div>

        </div>

      </div>
    </div>
  </div>
</section>



<section class="section">
  <div class="container is-max-desktop">
    <!-- Abstract. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Overview</h2>
        <div class="content has-text-justified">
          <p>
            Self-improvement through post-training methods has been acclaimed for enhancing the problem-solving capabilities (e.g., mathematical reasoning) of Large Language Models (LLMs) without human intervention. Amidst the quest for self-improvement in LLMs, the persistent question arises: are these iterative post-training methods truly fostering progress, or are they inadvertently leading to regression?
          </p>
            
          <p>
            To address this, we propose a comprehensive evaluative framework that goes beyond the superficial pass@1 metric to scrutinize the underlying enhancements of post-training paradigms for self-improvement. Through rigorous experimentation and analysis across diverse problem-solving tasks, the empirical results point out the phenomenon of self-improvement reversal, where models showing improved performance across benchmarks will paradoxically exhibit declines in broader, essential capabilities.
          </p>
          <ul>
            <li><b>Improvement Problems: </b>Iterative self-improvement hardly entails the acquisition of new problem-solving abilities, but rather the enhancement of the model’s correct  answer selection within its generation
              space.</li>
            <li><b>Solutions Diversity: </b>The diversity of model's outputs, which can be crucial for creativity and robustness in problem-solving, is compromised.</li>
            <li><b>OOD Generalization: </b>The model exhibit declines in out-of-distribution (OOD) generalization. </li>
          </ul>

          <div align="center">
            <figure>
              <img src="static/images/figure_case_study.png" width=100%/>
              <figcaption>One case of sampled responses from the test set after iterative DPO training of the Mistral7B model on the GSM8K dataset.</figcaption>
            </figure>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Post-training for Self-Improvement</h2>
        <div align="center">
          <figure>
            <img src="static/images/algorithm.png" width=100%/>
            <figcaption>Iterative Self-Improvement.</figcaption>
          </figure>
        </div>
      </div>
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Experiment</h2>
        
        <div align="center">
          <figure>
            <img src="static/images/result.png" width=100%/>
            <figcaption>Pass@1 accuracy across the four benchmarks by performing with the three paradigms: Iterative SFT, Iterative DPO and Iterative SFT-DPO.</figcaption>
          </figure>
        </div>


        <div align="center">
          <figure>
            <img src="static/images/coverage.png" width=100%/>
            <figcaption>The shaded area indicates the correct answer coverage of M. </figcaption>
          </figure>
        </div>

      </div>
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Critical Evaluations on Self-Improvement</h2>
        <div class="content has-text-justified">
          <p>
            Despite the extensive exploration of various post-training practices for self-improvement and a deepened understanding of their efficacy, current endeavors remain narrowly focused on enhancing performance numbers across these problem-solving benchmarks. Transitioning beyond using pass@1 accuracy as the indicator of improvement, our objective in this section is to engage in a critical examination and reevaluation of iterative self-improvement: discerning whether the improvements constitute genuine progress or merely regression.

            <h4 class="title is-8">(A) Improvement Problems</h4>
            <div align="center">
              <figure>
                <img src="static/images/improvementset.png" width=100%/>
                <figcaption>Pass@N accuracy of M1 with zero-shot prompting on IS(t), for t > 2</figcaption>
              </figure>
            </div>
            <p>To better gauge how the model problem-solving capabilities evolve overtime, we propose to first quantify the improvement problems as improvement set (IS) at each iteration. We apply this evaluative methodology to CSQA, GSM8K, MATH and MBPP datasets with three post-training methods. Generation sampling N varies from 2<sup>1</sup> to 2<sup>6</sup> with the temperature set as 0.75.</p>
            <p>As N grows, M1 achieves near-perfect pass@N accuracy on IS(t), suggesting its inherent capacity to tackle the deemed improvement problems.</p>

            <h4 class="title is-8">(B) Solutions Diversity</h4> 
            
            <div align="center">
              <figure>
                <img src="static/images/solution.png" width=100%/>
                <figcaption>Diversity of the sampling outputs from Mt within the iterative process.</figcaption>
              </figure>
            </div>
            <p>While pass@1 accuracy measures the correctness of the final answer, it does not capture the diversity of solutions a model can generate. we employ a combination of Distinct N-grams and Sentence-BERT embedding cosine similarity to measure mod diversity. Additionally, for mathematical reasoning, we introduce Distinct Equations to measure the diversity of mathematical answers by analyzing the variety of equations in the generated solutions.</p>
            <p>All methods show a consistent decrease in diversity, significantly diminishing the diversity of model outputs over iterations, impacting both correct and incorrect answers. This reduction is evident across all three metrics: syntactic, semantic, and logical diversity.</p>


            <h4 class="title is-8">(C) OOD Generalization</h4>
            <div align="center">
              <figure>
                <img src="static/images/ood.png" width=100%/>
                <figcaption>Pass@1 Accuracy of Mt on the MATH Algebra Test Set (Post-Training on GSM8K)</figcaption>
              </figure>
            </div>
            <p>In our pursuit to understand the broader implications of iterative self-improvement, it is crucial to assess not only the models’ performance on specific benchmarks but also their ability to generalize to out-of-distribution (OOD) tasks. To evaluate the generalization capability of the models, we conducted iterative post-training on the GSM8K dataset and then transferred these models to the MATH algebra test set. For the sake of measuring OOD generalization, we define two metrics as follows defined to facilitate a deeper analysis:
            </p>
            <ul>
              <li><b> Whole Accuracy </b>: this metric represents the pass@1 accuracy across the entire
                test set.</li>
              <li><b>Group Disparity: </b>This metric quantifies the difference in pass@1 accuracy between the best performing group (Level 1 test set) and the worst-performing group (Level 5 test set).</li>
            </ul>
            <p>With the increase in iterative steps, Iterative SFT and Iterative SFT-DPO can significantly harm the OOD generalization. In contrast, Iterative DPO demonstrates a noticeable improvement. All three iterative post-training methods can exacerbate the generalization disparities across groups, inadvertently causing models to focus on easier problems rather than enhancing their ability to solve more complex ones. </p>
              
          </p>
        </div>
      </div>
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <!-- Contact. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">📬 Contact</h2>
        <div class="content has-text-justified">
          <p>
            If you have any questions regarding this project, feel free to submit a <a href="https://github.com/GAIR-NLP/self-improvement-reversal">github issue</a> or reach out to us via email.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>



<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h2 class="title">BibTeX</h2>
    <pre><code>@article{
    }
</code></pre>
  </div>
</section>


<footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            This website is licensed under a <a rel="license"
                                                href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
            Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>
          <!-- <p>
            This means you are free to borrow the <a
              href="https://github.com/nerfies/nerfies.github.io">source code</a> of this website,
            we just ask that you link back to this page in the footer.
            Please remember to remove the analytics code included in the header of the website which
            you do not want on your website.
          </p> -->
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
  function showLeaderboard(type) {
  // Hide all leaderboards initially
  var allTables = document.querySelectorAll('.leaderboard-table');
  allTables.forEach(table => table.style.display = 'none');
  
  // Show and sort the selected leaderboard
  var table, isAscending;
  switch (type) {
    case 'selfKnowledge':
      table = document.getElementById('selfKnowledgeTable');
      isAscending = false;  // Higher values at the top
      break;
    case 'nonDeceptiveness':
      table = document.getElementById('nonDeceptivenessTable');
      isAscending = true;  // Lower values at the top
      break;
    case 'consistency':
      table = document.getElementById('consistencyTable');
      isAscending = false;  // Higher values at the top
      break;
  }

  table.style.display = 'block';
  sortTableByColumn(table.id, 1, isAscending);
}

function sortTableByColumn(tableId, colIndex, ascending = true) {
  var table = document.getElementById(tableId);
  var rows = Array.from(table.rows).slice(1);

  rows.sort(function(a, b) {
    var cellA = parseFloat(a.cells[colIndex].innerText) || 0;
    var cellB = parseFloat(b.cells[colIndex].innerText) || 0;
    return ascending ? cellA - cellB : cellB - cellA;
  });

  rows.forEach(function(row) {
    table.tBodies[0].appendChild(row);
  });
}

// Initialize the sorting for each leaderboard upon page load
document.addEventListener('DOMContentLoaded', function() {
  showLeaderboard('selfKnowledge'); // Show and sort self-knowledge by default
});

document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.leaderboard-table th').forEach(function(header, index) {
    header.addEventListener('click', function() {
      var tableId = header.closest('table').id;
      var ascending = !header.classList.contains('ascending');
      sortTableByColumn(tableId, index, ascending);
      header.classList.toggle('ascending', ascending);
    });
  });
});
</script>


<style>
  .hidden {
      display: none;
  }
  .sortable:hover {
      cursor: pointer;
  }
  .asc::after {
      content: ' ↑';
  }
  .desc::after {
      content: ' ↓';
  }
  .button-64 {
  align-items: center;
  background-image: linear-gradient(144deg, #C972FF, #7D74F3 50%, #40E0EB); /* Lighter gradient colors */
  border: 0;
  border-radius: 8px;
  box-shadow: rgba(151, 65, 252, 0.2) 0 15px 30px -5px;
  box-sizing: border-box;
  color: #FFFFFF;
  display: flex;
  font-family: Phantomsans, sans-serif;
  font-size: 9px; /* Smaller font size */
  justify-content: center;
  line-height: 1em;
  min-width: 70px; /* Smaller width */
  padding: 2px; /* Less padding */
  text-decoration: none;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  white-space: nowrap;
  cursor: pointer;
  margin-right: 10px; /* Space between buttons */
}

.button-64:active,
.button-64:hover {
  outline: 0;
}

.button-64 span {
  background-color: rgb(235, 235, 245); /* Lighter background color for the text span */
  color: #333; /* Darker text color for better contrast */
  padding: 8px 12px; /* Adjust padding for smaller size */
  border-radius: 6px;
  width: 100%;
  height: 100%;
  transition: 300ms;
}

.button-64:hover span {
  background: rgba(235, 235, 245, 0.5); /* Even lighter on hover */
}

@media (min-width: 768px) {
  .button-64 {
    font-size: 16px; /* Adjust font size for larger screens */
    min-width: 120px; /* Adjust minimum width for larger screens */
  }
}
</style>




</body>
</html>
